scalar DateTime

enum QuestionType {
    MULTIPLE_CHOICE
    TRUE_FALSE
    SHORT_ANSWER
}

type User {
    id: Int
    email: String!
    isAdmin: Boolean!
    name: String!
    entries: [Entry!]
}

type Entry {
    id: Int
    title: String!
    quiz: Quiz!
    author: User!
}

type Quiz {
    id: Int
    title: String!
    questions: [Question!]
    createdAt: DateTime!
    updatedAt: DateTime!
    entries: [Entry!]
}

input QuestionInput {
    id: Int
    text: String!
    questionType: QuestionType!
    quizId: Int
    options: [String]
    correctAnswer: String
}

type Question {
    id: Int
    text: String!
    questionType: QuestionType!
    quizId: Int!
    options: [String]
    correctAnswer: String
}

type Query {
    # User Queries
    getAllUsers: [User!]!
    getUser(id: Int!): User

    # Quiz Queries
    getAllQuizzes: [Quiz!]!
    getQuiz(id: Int!): Quiz
    getUsersForQuiz(quizId: Int!): [User!]!
    getQuestionsForQuiz(quizId: Int!): [Question!]!

    # Question Queries
    getQuestion(id: Int!): Question
    isQuestionCorrect(questionId: Int!, answer: String!): Boolean!
}

type Mutation {
    # User Mutations
    createUser(email: String!, name: String!, isAdmin: Boolean): User!
    deleteUser(id: Int!): User!
    updateUser(id: Int!, email: String, name: String): User!
    
    # Question Mutations
    createQuestion(text: String!, questionType: QuestionType!, correctAnswer: String, quizId: Int!): Question!
    deleteQuestion(id: Int!): Question!
    updateQuestion(id: Int!, text: String, questionType: QuestionType, correctAnswer: String): Question!
    
    # Quiz Mutations
    createQuiz(title: String!, questions: [QuestionInput]): Quiz!
    updateQuiz(id: Int!, title: String): Quiz!
    addQuestionToQuiz(quizId: Int!, questionId: Int!): Quiz!
    removeQuestionFromQuiz(quizId: Int!, questionId: Int!): Quiz!
    deleteQuiz(id: Int!): Quiz!
}

type Subscription {
    quizUpdated(quizId: Int!): Quiz!
}